{"version":3,"sources":["Item.tsx","App.tsx","Bill.tsx","Login.tsx","UseDetail.tsx","index.tsx"],"names":["styles","price","fontSize","App","styled","div","Container","Wrapper","Button","Item","props","onClick","console","log","quantity","changeItem","itemName","setTotalPrice","totalPrice","className","style","Heading","h2","Checkout","CheckoutItems","button","heading","fontWeight","pad","padding","useState","menu","setMenu","temp","map","item","id","_fetchMenu","a","axios","get","res","data","error","items","totalItem","url","method","user","detail","result","status","navigate","useEffect","setTotalItem","filter","key","type","Bill","href","Form","form","FormGroup","Input","input","Login","setDetail","email","setEmail","disabled","setDisabled","onSubmit","e","preventDefault","value","placeholder","required","onChange","target","validity","valid","useDetail","window","sessionStorage","getItem","initialDetail","userInfo","setItem","Main","path","rootElement","document","getElementById","render"],"mappings":"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","file":"static/js/main.60580372.chunk.js","sourcesContent":["import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\ninterface Props {\r\n  itemName: string;\r\n  quantity: number;\r\n  price: number;\r\n  id: string;\r\n  changeItem: any;\r\n  totalPrice: any;\r\n  setTotalPrice: any;\r\n}\r\n\r\nconst styles = {\r\n  price: {\r\n    fontSize: \"2em\"\r\n  }\r\n};\r\n\r\nconst App = styled.div`\r\n  padding: 1em;\r\n  background: #fff;\r\n`;\r\n\r\nconst Container = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  flex-flow: row nowrap;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n`;\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  flex-flow: row nowrap;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n`;\r\n\r\nconst Button = styled.div`\r\n  padding: 0.5em;\r\n  color: #000;\r\n  cursor: pointer;\r\n\r\n  &:hover {\r\n    background: #000;\r\n    color: #fff;\r\n  }\r\n`;\r\n\r\nconst Item: React.FC<Props> = (props) => {\r\n  const addItem = () => {\r\n    console.log(props.quantity + 1);\r\n    props.changeItem(props.itemName, props.quantity + 1);\r\n    props.setTotalPrice(props.totalPrice + props.price);\r\n  };\r\n\r\n  const removeItem = () => {\r\n    if (props.quantity >= 1) {\r\n      props.changeItem(props.itemName, props.quantity - 1);\r\n      props.setTotalPrice(props.totalPrice - props.price);\r\n    } else {\r\n      return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <App>\r\n      <Container>\r\n        <Wrapper>\r\n          <Button onClick={addItem}>\r\n            <i className=\"im im-plus\"></i>\r\n          </Button>\r\n          <Button onClick={removeItem}>\r\n            <i className=\"im im-minus\"></i>\r\n          </Button>\r\n          <div>{props.itemName}</div>\r\n        </Wrapper>\r\n        <div>\r\n          <div style={styles.price}>Rs.{props.price}/-</div>\r\n        </div>\r\n      </Container>\r\n    </App>\r\n  );\r\n};\r\n\r\nexport default Item;\r\n","import axios from \"axios\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { navigate } from \"@reach/router\";\r\nimport download from \"downloadjs\";\r\n\r\nimport Item from \"./Item\";\r\n\r\ninterface Items {\r\n  itemName: string;\r\n  quantity: number;\r\n  price: number;\r\n  id: string;\r\n}\r\n\r\ninterface Props {\r\n    path: string;\r\n    detail: any;\r\n    totalItem: any;\r\n    setTotalItem: any;\r\n}\r\n\r\n\r\nconst Container = styled.div`\r\n  width: 100%;\r\n  display: grid;\r\n  grid-template-columns: 2fr 1fr;\r\n\r\n  @media (max-width: 500px) {\r\n    display: block;\r\n  }\r\n`;\r\n\r\nconst Heading = styled.h2`\r\n  text-align: center;\r\n`;\r\n\r\nconst Checkout = styled.div`\r\n  position: sticky;\r\n  top: 3em;\r\n  background-color: #fff;\r\n  box-shadow: 0px 0px 14px 1px #9898989c;\r\n  padding: 1em;\r\n  height: max-content;\r\n  border-radius: 0.5em;\r\n\r\n  @media (max-width: 500px) {\r\n  }\r\n`;\r\n\r\nconst CheckoutItems = styled.div`\r\n  height: 60vh;\r\n  width: 25em;\r\n  overflow-y: auto;\r\n  background: #fff;\r\n\r\n  @media (max-width: 500px) {\r\n    width: 100%;\r\n    height: auto;\r\n  }\r\n`;\r\n\r\nconst Button = styled.button`\r\n  width: 100%;\r\n  padding: 1em;\r\n  border: none;\r\n  background-color: #000;\r\n  color: #fff;\r\n  margin: 1em 0em;\r\n  border-radius: 5px;\r\n  font-family: \"Noto Sans Display\", sans-serif;\r\n`;\r\n\r\nconst Wrapper = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  flex-flow: row nowrap;\r\n  align-items: center;\r\n  padding: 0.5em 2em;\r\n  justify-content: space-between;\r\n`;\r\n\r\nconst styles = {\r\n  heading: {\r\n    fontWeight: 600\r\n  },\r\n  pad: {\r\n    padding: \"1em\"\r\n  }\r\n};\r\n\r\nexport default function App(props: Props) {\r\n  const [menu, setMenu] = useState<Items[] | null>(null);\r\n  const [username, setUsername] = useState<string>(\"Anomoyous\");\r\n  const [totalPrice, setTotalPrice] = useState(0);\r\n\r\n  const changeItem = (itemName: string, quantity: number) => {\r\n      if(menu) {\r\n    let temp = menu.map((item) => {\r\n      if (item.itemName !== itemName) return item;\r\n      return {\r\n        itemName: item.itemName,\r\n        quantity,\r\n        price: item.price,\r\n        id: item.id\r\n      };\r\n    });\r\n    setMenu(temp);\r\n  }\r\n  };\r\n\r\n  const _fetchMenu = async () => {\r\n\r\n    try {\r\n      let res = await axios.get(\"/\");\r\n      let { data } = res.data;\r\n\r\n      setMenu(data);\r\n    } catch (e) {\r\n      console.error(\"Error Occured: \", e);\r\n    }\r\n  };\r\n\r\n  async function handlePay() {\r\n    console.log({\r\n      totalPrice,\r\n      items: props.totalItem\r\n    });\r\n    try {\r\n\r\n      let res = await axios({\r\n          url: \"/add\",\r\n        method: \"POST\",\r\n        data: {\r\n          user: props.detail,\r\n          result: props.totalItem,\r\n          totalPrice: totalPrice\r\n        }\r\n      });\r\n\r\n        console.log(res)\r\n\r\n      if (res.status === 200) {\r\n        console.log(res.data);\r\n        navigate(\"/bill\");\r\n      }\r\n\r\n    } catch (e) {\r\n      console.error(\"Error Occured while sending the data : \", e);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    // call the server of the menu\r\n    _fetchMenu();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (menu) {\r\n      props.setTotalItem(menu.filter((item) => item.quantity > 0));\r\n    }\r\n  }, [menu]);\r\n\r\n  useEffect(() => {\r\n    console.log(\"state Update\");\r\n  }, [props.totalItem]);\r\n\r\n  if (!menu) {\r\n    return <div>Loading</div>;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Heading>Menu</Heading>\r\n      <Container>\r\n        <div style={styles.pad}>\r\n          {menu.map((item) => {\r\n            return (\r\n              <Item\r\n                {...item}\r\n                key={item.id}\r\n                totalPrice={totalPrice}\r\n                changeItem={changeItem}\r\n                setTotalPrice={setTotalPrice}\r\n              />\r\n            );\r\n          })}\r\n        </div>\r\n\r\n        <Checkout>\r\n          <CheckoutItems>\r\n            <Wrapper>\r\n              <div style={styles.heading}>Items</div>\r\n              <div style={styles.heading}>Quantity</div>\r\n            </Wrapper>\r\n              {props.totalItem?.map((item: Items) => {\r\n              return (\r\n                <Wrapper key={item.id}>\r\n                  <div>{item.itemName}</div>\r\n                  <div>{item.quantity}</div>\r\n                </Wrapper>\r\n              );\r\n            })}\r\n          </CheckoutItems>\r\n          <Button type=\"button\" onClick={handlePay}>\r\n            Pay {totalPrice}\r\n          </Button>\r\n        </Checkout>\r\n      </Container>\r\n    </>\r\n  );\r\n}\r\n","import React, { FC } from \"react\";\r\nimport styled from \"styled-components\"\r\n\r\ninterface Props {\r\n    path: string;\r\n    detail: any;\r\n    totalItem: any;\r\n}\r\n\r\ninterface Items {\r\n    itemName: string;\r\n    id: string;\r\n    quantity: number;\r\n    price: number;\r\n}\r\n\r\nconst Heading = styled.div`\r\n    text-align: center;\r\n`\r\n\r\nconst Bill: FC<Props> = ({ totalItem, detail }) => {\r\n\r\n    return (\r\n        <div>\r\n            <Heading>{detail}</Heading>\r\n            {totalItem.map((item: Items) => {\r\n                return (\r\n                    <>\r\n                        <div>\r\n                            {item.itemName} - {item.quantity}\r\n                        </div>\r\n                    </>\r\n                );\r\n            })}\r\n\r\n            <a href={`/user/${detail}`}>Print the Bill</a>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Bill;\r\n","import React, {useState} from \"react\"\r\nimport styled from \"styled-components\"\r\n\r\nconst Form = styled.form`\r\n    width: 50%;\r\n    margin: 0em auto;\r\n`\r\n\r\nconst Container = styled.div`\r\n    width: 100%;\r\n    height: 100vh;\r\n    display: grid;\r\n    place-items: center;\r\n`\r\n\r\nconst FormGroup = styled.div`\r\n    padding: 0.5em;\r\n`\r\n\r\nconst Input = styled.input`\r\n    padding: 1em;\r\n    width: 100%;\r\n    display: block;\r\n    border-radius: 5px;\r\n    border: 2p solid #ddd;\r\n`\r\n\r\nconst Button = styled.button`\r\n    width: 100%;\r\n    display: block;\r\n    border: none;\r\n    padding: 1em;\r\n    background: black;\r\n    color: white;\r\n   \r\n   &:disabled {\r\n    cursor: not-allowed;\r\n    background: #ddd;\r\n   }\r\n`\r\n\r\ninterface Props {\r\n    path: string;\r\n    setDetail: any;\r\n}\r\n\r\nconst Login: React.FC<Props> = ({ setDetail }) => {\r\n    const [email, setEmail] = useState(\"\")\r\n    const [disabled, setDisabled] = useState(true)\r\n\r\n    const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\r\n        e.preventDefault()\r\n\r\n        setDetail(email)\r\n    }\r\n\r\n    const handleEmail = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n            setDisabled(!e.target.validity.valid)\r\n            setEmail(e.target.value)\r\n    } \r\n\r\n    return (\r\n        <Container>\r\n        <Form onSubmit={handleSubmit}>\r\n            <FormGroup>\r\n                <Input\r\n                    type=\"email\" \r\n                    value={email} \r\n                    placeholder=\"Enter the email\" \r\n                    required\r\n                    onChange={handleEmail}\r\n                />\r\n            </FormGroup>\r\n            <FormGroup>\r\n                <Button disabled={disabled} type=\"submit\">Login</Button>\r\n            </FormGroup>\r\n        </Form>\r\n        </Container>\r\n    )\r\n}\r\n\r\nexport default Login\r\n","import {useState} from \"react\"\r\n\r\nfunction useDetail () {\r\n    const initialDetail = () => {\r\n        let data = window.sessionStorage.getItem(\"info\")\r\n        console.log(data)\r\n        return data\r\n    }\r\n\r\n    let [detail, setDetail] = useState<string | null>(initialDetail())\r\n\r\n    // @ts-ignore\r\n    const changeDetail = (userInfo: string): void => {\r\n        console.log(userInfo)\r\n        //let userStr = JSON.stringify(userInfo) \r\n        window.sessionStorage.setItem(\"info\", userInfo)\r\n        setDetail(userInfo)\r\n    }\r\n\r\n    return [detail, changeDetail]\r\n}\r\n\r\nexport default useDetail\r\n","import {useState, useEffect} from \"react\";\r\n\r\nimport { render } from \"react-dom\";\r\nimport { Router } from \"@reach/router\";\r\n\r\nimport App from \"./App\";\r\nimport Bill from \"./Bill\";\r\nimport Login from \"./Login\"\r\nimport useDetail from \"./UseDetail\"\r\n\r\ninterface Items {\r\n  itemName: string;\r\n  quantity: number;\r\n  price: number;\r\n  id: string;\r\n}\r\n\r\nconst Main = () => {\r\n    // @ts-ignore\r\n    const [detail, setDetail] = useDetail()\r\n  const [totalItem, setTotalItem] = useState<Items[] | null>(null);\r\n\r\n    useEffect(() => {\r\n        console.log(\"Re Render\")\r\n    }, [totalItem])\r\n\r\n    if(!detail) {\r\n        return <Login setDetail={setDetail} path=\"/\" />\r\n    }\r\n\r\n  return (\r\n    <Router>\r\n      <App totalItem={totalItem} setTotalItem={setTotalItem} detail={detail} path=\"/\" />\r\n      <Bill totalItem={totalItem} detail={detail} path=\"/bill\" />\r\n    </Router>\r\n  );\r\n};\r\n\r\nconst rootElement = document.getElementById(\"root\");\r\nrender(<Main />, rootElement);\r\n"],"sourceRoot":""}